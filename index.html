<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Revisão de Óptica Geométrica</title>
<style>
body {
    margin: 0;
    font-family: 'Arial', sans-serif;
    background: linear-gradient(to bottom, #c6ffdd, #fbd786, #f7797d);
    overflow: hidden;
}
    .start-screen {
    position: absolute;
    top:0; left:0;
    width:100%; height:100%;
    display:flex;
    justify-content:center;
    align-items:center;
    flex-direction:column;
    background: rgba(0,0,0,0.6);
    z-index: 1000;
}
.start-screen h1 {
    color: #fff;
    font-size: 48px;
    margin-bottom: 20px;
    text-shadow: 2px 2px 6px #000;
}
.start-screen button {
    padding: 15px 40px;
    font-size: 24px;
    border: none;
    border-radius: 12px;
    background: linear-gradient(to right, #667eea, #764ba2);
    color: #fff;
    cursor: pointer;
    transition: all 0.3s;
}
.start-screen button:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 16px rgba(0,0,0,0.3);
}
.game-container {
    position: relative;
    width: 100%;
    height: 100vh;
}
.game-area {
    position: relative;
    width: 100%;
    height: 100%;
    overflow: hidden;
}
.ground {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 100px;
    background: #555;
}
.dino {
    position: absolute;
    bottom: 100px;
    left: 50px;
    width: 50px;
    height: 50px;
    background: #4caf50;
    border-radius: 8px;
    transition: bottom 0.2s, height 0.2s;
}
.dino.jumping { bottom: 200px; }
.dino.ducking { height: 25px; }
.obstacle {
    position: absolute;
    bottom: 100px;
    width: 25px;
    height: 50px;
    background: #f44336;
    border-radius: 4px;
}
.score-board {
    position: absolute;
    top: 20px;
    right: 20px;
    font-size: 20px;
    font-weight: bold;
    color: #333;
}

.question-modal {
    position: fixed;
    top:0; left:0;
    width:100%; height:100%;
    background: rgba(0,0,0,0.85);
    display: none; /* começa escondido */
    justify-content:center;
    align-items:center;
    z-index:1000;
}

.question-content {
    background: linear-gradient(to right, #667eea, #764ba2);
    color:white;
    padding:40px;
    border-radius:20px;
    max-width:600px;
    width:90%;
    text-align:center;
    box-shadow: 0 20px 40px rgba(0,0,0,0.5);
    border: 3px solid rgba(255,255,255,0.2);
}
.option {
    display:block;
    margin:15px 0;
    padding:15px;
    background: linear-gradient(to right, #4facfe, #00f2fe);
    border:none;
    border-radius:12px;
    cursor:pointer;
    font-size:18px;
    font-weight:bold;
    transition: all 0.3s;
}
.option:hover { transform: translateY(-2px); }
.option.correct { background: linear-gradient(to right, #56ab2f, #a8e6cf); }
.option.incorrect { background: linear-gradient(to right, #ff416c, #ff4757); }
.continue-btn {
    display:none;
    margin-top:20px;
    padding:12px 30px;
    background: linear-gradient(to right, #f093fb, #f5576c);
    border:none;
    border-radius:12px;
    cursor:pointer;
    font-size:18px;
    font-weight:bold;
}
</style>
</head>
<body>

<div class="game-container">
    <div class="score-board">Pontuação: <span id="score">0</span></div>
    <div class="game-area">
        <div class="ground"></div>
        <div class="dino" id="dino"></div>
    </div>
</div>

<div class="start-screen" id="startScreen">
    <h1>Obstáculos da Óptica </h1>
    <button onclick="initGame()">Iniciar Jogo</button>
</div>

<div class="question-modal" id="questionModal">
    <div class="question-content">
        <div id="questionText"></div>
        <div id="options"></div>
        <button class="continue-btn" id="continueBtn">Continuar</button>
    </div>
</div>

<script>
let dino = document.getElementById('dino');
let gameArea = document.querySelector('.game-area');
let score = 0;
let gameSpeed = 5;
let obstacles = [];
let jumping = false;
let ducking = false;
let scoreInterval;
let obstacleInterval;
let gameRunning = false;

const questions = [
{question:"Qual tipo de reflexão ocorre em uma superfície lisa como um espelho?",options:["Reflexão difusa","Reflexão especular","Reflexão total","Reflexão parcial"],correct:1},
{question:"Em um espelho plano, a imagem formada é:",options:["Real e invertida","Virtual e do mesmo tamanho","Real e ampliada","Virtual e reduzida"],correct:1},
{question:"Qual é a principal característica da reflexão difusa?",options:["Ocorre apenas em espelhos","A luz é espalhada em várias direções","Forma imagens nítidas","Só acontece com luz laser"],correct:1},
{question:"O que é ponto focal?",options:["O ponto onde a luz se dispersa","O ponto onde os raios convergem","O ponto de reflexão difusa","O ponto mais distante do espelho"],correct:1},
{question:"Um espelho convexo forma imagens:",options:["Sempre reais e invertidas","Sempre virtuais e reduzidas","Sempre reais e ampliadas","Nunca forma imagens"],correct:1},
{question:"Quando a luz atinge uma superfície e retorna ao meio de origem, esse fenômeno é chamado de:",options:["Refração","Reflexão","Absorção","Dispersão"],correct:1},
{question:"O que representa a reta normal no estudo da reflexão da luz?",options:["A reta perpendicular à superfície no ponto de incidência","O raio de luz incidente","O raio de luz refletido","A reta paralela à superfície"],correct:0},
{question:"Qual lei da reflexão é expressa pela igualdade de ângulos, onde o ângulo de incidência é igual ao ângulo de reflexão?",options:["Lei da Refração","Primeira Lei de Newton","Lei de Snell-Descartes","Segunda Lei da Reflexão"],correct:3},
{question:"Em qual tipo de superfície ocorre a reflexão especular?",options:["Superfície áspera e rugosa","Superfície polida e lisa, como um espelho","Superfície transparente","Superfície opaca e escura"],correct:1},
{question:"O que acontece com os raios de luz paralelos ao atingir uma superfície rugosa?",options:["Eles convergem para um único ponto.","Eles se mantêm paralelos após a reflexão.","Eles são absorvidos pela superfície.","Eles são espalhados em diversas direções."],correct:3},
{question:"Qual o nome da imagem formada por um espelho plano?",options:["Imagem virtual","Imagem real","Imagem invertida","Imagem ampliada"],correct:0},
{question:"A imagem formada por um espelho plano está sempre localizada:",options:["Na frente do espelho, invertida.","Na frente do espelho, no mesmo tamanho.","Atrás do espelho, a mesma distância do objeto.","No ponto focal do espelho."],correct:2},
{question:"Um espelho que possui a superfície refletora voltada para dentro (como a parte interna de uma colher) é chamado de:",options:["Espelho Côncavo","Espelho Convexo","Espelho Plano","Lente Convergente"],correct:0},
{question:"Em um espelho esférico, se o raio de curvatura R é de 40 cm, qual é a distância focal f?",options:["f = 80 cm","f = 40 cm","f = 20 cm","f = 10 cm"],correct:2},
{question:"Qual espelho esférico é comumente usado como espelho retrovisor lateral em carros por fornecer um grande campo de visão?",options:["Espelho Plano","Espelho Côncavo","Espelho Parabólico","Espelho Convexo"],correct:3}
];

function initGame(){
    document.getElementById('startScreen').style.display='none';
    startGame();
}

function startGame(){
    score = 0;
    gameSpeed = 5;
    obstacles.forEach(o => o.remove());
    obstacles = [];
    gameRunning = true;
    document.getElementById('score').textContent = score;
    scoreInterval = setInterval(()=>{
        score++;
        document.getElementById('score').textContent = score;
        if(score % 100 === 0) gameSpeed += 0.5;
    },100);
    obstacleInterval = setInterval(spawnObstacle,1500);
    requestAnimationFrame(gameLoop);
}

function spawnObstacle(){
    const obs = document.createElement('div');
    obs.className = 'obstacle';
    obs.style.left = gameArea.offsetWidth + 'px';
    gameArea.appendChild(obs);
    obstacles.push(obs);
}

function gameLoop(){
    if(!gameRunning) return;
    obstacles.forEach((obs,index)=>{
        let pos = parseInt(obs.style.left);
        pos -= gameSpeed;
        obs.style.left = pos+'px';
        if(pos + obs.offsetWidth < 0){
            obs.remove();
            obstacles.splice(index,1);
        }
        if(collision(dino, obs)){
            pauseGame();
            showQuestion();
            obs.remove();
            obstacles.splice(index,1);
        }
    });
    requestAnimationFrame(gameLoop);
}

function collision(a,b){
    const r1 = a.getBoundingClientRect();
    const r2 = b.getBoundingClientRect();
    return !(r1.top>r2.bottom || r1.bottom<r2.top || r1.right<r2.left || r1.left>r2.right);
}

function jump(){
    if(jumping || !gameRunning) return;
    jumping=true;
    dino.classList.add('jumping');
    setTimeout(()=>{ dino.classList.remove('jumping'); jumping=false; },400);
}

function duck(){
    if(ducking || !gameRunning) return;
    ducking=true;
    dino.classList.add('ducking');
    setTimeout(()=>{ dino.classList.remove('ducking'); ducking=false; },400);
}

document.addEventListener('keydown', e=>{
    if(e.code==='Space'||e.code==='ArrowUp') jump();
    if(e.code==='ArrowDown') duck();
});

function pauseGame(){
    gameRunning=false;
    clearInterval(scoreInterval);
    clearInterval(obstacleInterval);
}

function resumeGame(){
    gameRunning=true;
    scoreInterval = setInterval(()=>{
        score++;
        document.getElementById('score').textContent = score;
        if(score % 100 === 0) gameSpeed += 0.5;
    },100);
    obstacleInterval = setInterval(spawnObstacle,1500);
    requestAnimationFrame(gameLoop);
}

function showQuestion(){
    const q = questions[Math.floor(Math.random()*questions.length)];
    document.getElementById('questionText').textContent = q.question;
    const optionsDiv = document.getElementById('options');
    optionsDiv.innerHTML='';
    q.options.forEach((opt,i)=>{
        const btn = document.createElement('button');
        btn.className='option';
        btn.textContent=opt;
        btn.onclick=()=> selectAnswer(i,q.correct);
        optionsDiv.appendChild(btn);
    });
    document.getElementById('questionModal').style.display='flex';
}

function selectAnswer(selected,correct){
    const buttons = document.querySelectorAll('.option');
    buttons.forEach((b,i)=>{
        b.disabled=true;
        if(i===correct) b.classList.add('correct');
        else if(i===selected) b.classList.add('incorrect');
    });
    if(selected===correct){
        score += 50;
        const btnContinue = document.getElementById('continueBtn');
        btnContinue.style.display='block';
        btnContinue.onclick = ()=>{
            document.getElementById('questionModal').style.display='none';
            btnContinue.style.display='none';
            resumeGame();
        }
    } else {
        alert("Resposta incorreta! O jogo reiniciará.");
        document.getElementById('questionModal').style.display='none';
        startGame(); // reinicia o jogo
    }
}
</script>

</body>
</html>
